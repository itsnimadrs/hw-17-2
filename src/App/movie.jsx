import React, { useState } from "react";

const Movie = ({ movie, onRemove, onEdit }) => {
  const [isEditing, setIsEditing] = useState(false);
  const [editedTitle, setEditedTitle] = useState(movie.title);

  const handleEdit = () => {
    setIsEditing(true);
  };

  const handleSave = () => {
    if (typeof onEdit === "function") {
      onEdit(movie.id, editedTitle);
    } else {
      console.error("onEdit is not a function");
    }
    setIsEditing(false);
  };

  return (
    <div className="flex items-center justify-center ">
      <div className="flex flex-col justify-center items-center">
        <div className="w-[30rem] h-72 bg-yellow-100 my-5 flex rounded-md">
          <div className="w-40 h-60 bg-gray-300 m-4 p-14 font-bold text-lg">
            <span>
              Movie <br />
              Poster
            </span>
          </div>
          <div className="flex flex-col">
            {isEditing ? (
              <input
                type="text"
                value={editedTitle}
                onChange={(e) => setEditedTitle(e.target.value)}
              />
            ) : (
              <p className="p-2 text-center mt-10 font-semibold text-xl">
                Title: {movie.title}
              </p>
            )}
            {isEditing ? (
              <button  onClick={handleSave}>Save</button>
            ) : (
              <button className="flex justify-end" onClick={handleEdit} disabled={isEditing}>Edit</button>
            )}
            <div className="items-center">
              <svg
                className="pl-6 cursor-pointer"
                xmlns="http://www.w3.org/2000/svg"
                width="167"
                height="24"
                viewBox="0 0 167 24"
                fill="none"
              >
                <path
                  d="M11.4461 1.83227L8.31618 7.77057L1.31335 8.7259C0.0575409 8.89633 -0.445743 10.345 0.464961 11.1748L5.53135 15.7944L4.33305 22.3203C4.11736 23.4999 5.44507 24.3834 6.55709 23.8318L12.8218 20.7505L19.0864 23.8318C20.1985 24.3789 21.5262 23.4999 21.3105 22.3203L20.1122 15.7944L25.1786 11.1748C26.0893 10.345 25.586 8.89633 24.3302 8.7259L17.3274 7.77057L14.1974 1.83227C13.6366 0.773788 12.0117 0.760332 11.4461 1.83227Z"
                  fill="#D3BCA2"
                />
                <path
                  d="M46.7852 1.83227L43.6553 7.77057L36.6525 8.7259C35.3967 8.89633 34.8934 10.345 35.8041 11.1748L40.8705 15.7944L39.6722 22.3203C39.4565 23.4999 40.7842 24.3834 41.8962 23.8318L48.1609 20.7505L54.4256 23.8318C55.5376 24.3789 56.8653 23.4999 56.6496 22.3203L55.4513 15.7944L60.5177 11.1748C61.4284 10.345 60.9251 8.89633 59.6693 8.7259L52.6665 7.77057L49.5365 1.83227C48.9757 0.773788 47.3508 0.760332 46.7852 1.83227Z"
                  fill="#D3BCA2"
                />
                <path
                  d="M82.1244 1.83227L78.9944 7.77057L71.9916 8.7259C70.7358 8.89633 70.2325 10.345 71.1432 11.1748L76.2096 15.7944L75.0113 22.3203C74.7956 23.4999 76.1233 24.3834 77.2353 23.8318L83.5 20.7505L89.7647 23.8318C90.8767 24.3789 92.2044 23.4999 91.9887 22.3203L90.7904 15.7944L95.8568 11.1748C96.7675 10.345 96.2642 8.89633 95.0084 8.7259L88.0056 7.77057L84.8756 1.83227C84.3148 0.773788 82.69 0.760332 82.1244 1.83227Z"
                  fill="#D3BCA2"
                />
                <path
                  d="M117.463 1.83227L114.334 7.77057L107.331 8.7259C106.075 8.89633 105.572 10.345 106.482 11.1748L111.549 15.7944L110.35 22.3203C110.135 23.4999 111.462 24.3834 112.574 23.8318L118.839 20.7505L125.104 23.8318C126.216 24.3789 127.544 23.4999 127.328 22.3203L126.13 15.7944L131.196 11.1748C132.107 10.345 131.603 8.89633 130.348 8.7259L123.345 7.77057L120.215 1.83227C119.654 0.773788 118.029 0.760332 117.463 1.83227Z"
                  fill="#D3BCA2"
                />
                <path
                  d="M152.803 0.798919L149.673 6.73721L142.67 7.69254C141.414 7.86298 140.911 9.31167 141.821 10.1414L146.888 14.7611L145.69 21.2869C145.474 22.4665 146.802 23.3501 147.914 22.7984L154.178 19.7171L160.443 22.7984C161.555 23.3456 162.883 22.4665 162.667 21.2869L161.469 14.7611L166.535 10.1414C167.446 9.31167 166.942 7.86298 165.687 7.69254L158.684 6.73721L155.554 0.798919C154.993 -0.259568 153.368 -0.273023 152.803 0.798919Z"
                  fill="#D3BCA2"
                />
              </svg>
              <div className="bg-gray-400 w-full h-12 p-2 text-xl text-center m-6 text-white">
                Watched
              </div>
            </div>
          </div>
          <button className="m-auto mt-[9.7rem]" onClick={() => onRemove(movie.id)}>
            <div className=" inline-block mx-10 my-auto  ">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="50"
                height="48"
                viewBox="0 0 50 48"
                fill="none"
              >
                <ellipse cx="25" cy="24" rx="25" ry="24" fill="#FF4133" />
                <path
                  d="M18.0714 30.5938C18.0714 30.9667 18.2408 31.3244 18.5421 31.5881C18.8435 31.8518 19.2523 32 19.6786 32H29.3214C29.7477 32 30.1565 31.8518 30.4578 31.5881C30.7592 31.3244 30.9286 30.9667 30.9286 30.5938V20.75H18.0714V30.5938ZM27.1786 23.0938C27.1786 22.9694 27.235 22.8502 27.3355 22.7623C27.4359 22.6744 27.5722 22.625 27.7143 22.625C27.8564 22.625 27.9926 22.6744 28.0931 22.7623C28.1936 22.8502 28.25 22.9694 28.25 23.0938V29.6563C28.25 29.7806 28.1936 29.8998 28.0931 29.9877C27.9926 30.0756 27.8564 30.125 27.7143 30.125C27.5722 30.125 27.4359 30.0756 27.3355 29.9877C27.235 29.8998 27.1786 29.7806 27.1786 29.6563V23.0938ZM23.9643 23.0938C23.9643 22.9694 24.0207 22.8502 24.1212 22.7623C24.2217 22.6744 24.3579 22.625 24.5 22.625C24.6421 22.625 24.7783 22.6744 24.8788 22.7623C24.9793 22.8502 25.0357 22.9694 25.0357 23.0938V29.6563C25.0357 29.7806 24.9793 29.8998 24.8788 29.9877C24.7783 30.0756 24.6421 30.125 24.5 30.125C24.3579 30.125 24.2217 30.0756 24.1212 29.9877C24.0207 29.8998 23.9643 29.7806 23.9643 29.6563V23.0938ZM20.75 23.0938C20.75 22.9694 20.8064 22.8502 20.9069 22.7623C21.0074 22.6744 21.1436 22.625 21.2857 22.625C21.4278 22.625 21.5641 22.6744 21.6645 22.7623C21.765 22.8502 21.8214 22.9694 21.8214 23.0938V29.6563C21.8214 29.7806 21.765 29.8998 21.6645 29.9877C21.5641 30.0756 21.4278 30.125 21.2857 30.125C21.1436 30.125 21.0074 30.0756 20.9069 29.9877C20.8064 29.8998 20.75 29.7806 20.75 29.6563V23.0938ZM31.4643 17.9375H27.4464L27.1317 17.3897C27.065 17.2725 26.9623 17.174 26.8352 17.1052C26.708 17.0363 26.5614 16.9999 26.4118 17H22.5848C22.4356 16.9995 22.2893 17.0358 22.1625 17.1047C22.0358 17.1736 21.9338 17.2724 21.8683 17.3897L21.5536 17.9375H17.5357C17.3936 17.9375 17.2574 17.9869 17.1569 18.0748C17.0564 18.1627 17 18.2819 17 18.4063V19.3438C17 19.4681 17.0564 19.5873 17.1569 19.6752C17.2574 19.7631 17.3936 19.8125 17.5357 19.8125H31.4643C31.6064 19.8125 31.7426 19.7631 31.8431 19.6752C31.9436 19.5873 32 19.4681 32 19.3438V18.4063C32 18.2819 31.9436 18.1627 31.8431 18.0748C31.7426 17.9869 31.6064 17.9375 31.4643 17.9375Z"
                  fill="white"
                />
              </svg>
            </div>
          </button>
        </div>
      </div>
    </div>
  );
};

export default Movie;
